(function(i,t,r,u,f,R,b,B){"use strict";const A=t.findByStoreName("SelectedChannelStore"),C=t.findByStoreName("ChannelStore"),I=t.findByProps("jumpToMessage"),{openUrl:p}=t.findByProps("openUrl");function v(){const n=A.getChannelId(),e=C.getChannel(n);I.jumpToMessage({channelId:e.id,messageId:e.id,flash:!0,jumpType:"ANIMATED"})}function h(n,e){p(`https://discord.com/channels/${n}/${e}/${e}`)}function E(n,e){p(`https://discord.com/channels/${n}/${e}/${e}`)}const o=b.storage;function N(){o.jumpToPresent??=!0,o.actionSheets??=!0}const{ActionSheetRow:l}=t.findByProps("ActionSheetRow"),$=t.findByName("ForumPostLongPressActionSheet",!1),w=t.findByName("ChannelLongPressActionSheet",!1),s=Symbol.for("Patched by JumpToTop");function m(n){return R.findInReactTree(n,function(e){return e?.[0]?.type?.name==="ActionSheetRowGroup"})}function T(n){return React.createElement(l.Group,null,React.createElement(l,{label:"Jump To Top",icon:React.createElement(r.ReactNative.View,{style:{transform:[{scaleY:-1}]}},React.createElement(l.Icon,{source:f.getAssetIDByName("ArrowLargeDownIcon")})),onPress:n}))}const j=[0,1,2,3,5,6,10,11,12];function J(){const n=[];return n.push(u.after("default",$,function([{thread:e}],a){if(!o.actionSheets||a[s])return;const c=m(a);c&&(c.unshift(T(function(){return E(e.guild_id,e.id)})),a[s]=!0)})),n.push(u.after("default",w,function(e,a){if(!o.actionSheets||a[s])return;const c=a?.props?.channel;c&&c.type in j&&(u.after("type",a,function(S,H){const P=m(H);P&&P.unshift(T(function(){return h(c.guild_id??"@me",c.id)}))}),a[s]=!0)})),function(){for(const e of n)e()}}const L=t.findByProps("Stack","Button","Text"),{IconButton:D}=L;function k({isNotCurrentChannel:n=!1,details:e={}}){return React.createElement(r.ReactNative.View,{style:{transform:[{scaleY:-1}]}},React.createElement(D,{onPress:n?function(){return h(e.guildId,e.channelId)}:v,variant:"secondary",icon:f.getAssetIDByName("ArrowLargeDownIcon")}))}const V=t.findByName("JumpToPresentButton",!1),_=t.findByProps("Stack","Button","Text"),{Stack:M}=_,O=t.findByStoreName("ChannelStore"),g=Symbol.for("Patched by JumpToTop");function G(){return u.after("default",V,function([{channelId:n}],e){if(!o.jumpToPresent||e==null||e[g])return;const a=e.props?.children;e[g]=!0;const{type:c,guild_id:S}=O.getChannel(n);e.props.children=r.React.createElement(M,null,r.React.createElement(k,{isNotCurrentChannel:c===2,details:{channelId:n,guildId:S}}),a)})}const U=t.findByProps("Stack","Button"),{Stack:x,TableRowGroup:F,TableSwitchRow:y}=U;function Y(){return B.useProxy(o),React.createElement(x,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24},React.createElement(F,{title:"Settings"},React.createElement(y,{label:"Add button to chats.",subLabel:"Add the JumpToTop button above the Jump to Present button in chats.",value:o.jumpToPresent,onValueChange:function(n){return o.jumpToPresent=n}}),React.createElement(y,{label:"Add button to action sheets.",subLabel:"Add the JumpToTop button to channel and forum action sheets.",value:o.actionSheets,onValueChange:function(n){return o.actionSheets=n}})))}const d=[];var z={onLoad(){N(),d.push(G()),d.push(J())},onUnload(){for(const n of d)n()},settings:Y};return i.default=z,Object.defineProperty(i,"__esModule",{value:!0}),i})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui.assets,vendetta.utils,vendetta.plugin,vendetta.storage);
