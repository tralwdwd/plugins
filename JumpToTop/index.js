(function(s,n,c,p,h,m,B,$,A){"use strict";function C(e,t,o){return function(...a){try{return o(...a)}catch(i){p.logger.error(`[${p.plugin.manifest.name}] Error occured during ${e} patch on ${t}.`,i)}}}const l=function(...e){const t=e[2];return e[2]=C("after",e[0],t),h.after(...e)},I=n.findByStoreName("SelectedChannelStore"),v=n.findByStoreName("ChannelStore"),E=n.findByProps("jumpToMessage"),{openUrl:g}=n.findByProps("openUrl");function N(){const e=I.getChannelId(),t=v.getChannel(e);E.jumpToMessage({channelId:t.id,messageId:t.id,flash:!0,jumpType:"ANIMATED"})}function T(e,t){g(`https://discord.com/channels/${e}/${t}/${t}`)}function w(e,t){g(`https://discord.com/channels/${e}/${t}/${t}`)}const r=$.storage;function j(){r.jumpToPresent??=!0,r.actionSheets??=!0}const{ActionSheetRow:d}=n.findByProps("ActionSheetRow"),J=n.findByName("ForumPostLongPressActionSheet",!1),L=n.findByName("ChannelLongPressActionSheet",!1),u=Symbol.for("Patched by JumpToTop");function y(e){return B.findInReactTree(e,function(t){return t?.[0]?.type?.name==="ActionSheetRowGroup"})}function S(e){return React.createElement(d.Group,null,React.createElement(d,{label:"Jump To Top",icon:React.createElement(c.ReactNative.View,{style:{transform:[{scaleY:-1}]}},React.createElement(d.Icon,{source:m.getAssetIDByName("ArrowLargeDownIcon")})),onPress:e}))}const D=[0,1,2,3,5,6,10,11,12];function k(){const e=[];return e.push(l("default",J,function([{thread:t}],o){if(!r.actionSheets||o[u])return;const a=y(o);a&&(a.unshift(S(function(){return w(t.guild_id,t.id)})),o[u]=!0)})),e.push(l("default",L,function(t,o){if(!r.actionSheets||o?.[u])return;const a=o?.props?.channel;a&&a.type in D&&(e.push(l("type",o,function(i,Q){const b=y(Q);b&&b.unshift(S(function(){return T(a.guild_id??"@me",a.id)}))})),o[u]=!0)})),function(){for(const t of e)t()}}const V=n.findByProps("Stack","Button","Text"),{IconButton:M}=V;function O({isNotCurrentChannel:e=!1,details:t={}}){return React.createElement(c.ReactNative.View,{style:{transform:[{scaleY:-1}]}},React.createElement(M,{onPress:e?function(){return T(t.guildId,t.channelId)}:N,variant:"secondary",icon:m.getAssetIDByName("ArrowLargeDownIcon")}))}const _=n.findByName("JumpToPresentButton",!1),G=n.findByProps("Stack","Button","Text"),{Stack:U}=G,x=n.findByStoreName("ChannelStore"),P=Symbol.for("Patched by JumpToTop");function F(){return h.after("default",_,function([{channelId:e}],t){if(!r.jumpToPresent||t==null||t[P])return;const o=t.props?.children;t[P]=!0;const{type:a,guild_id:i}=x.getChannel(e);t.props.children=c.React.createElement(U,null,c.React.createElement(O,{isNotCurrentChannel:a===2,details:{channelId:e,guildId:i}}),o)})}const Y=n.findByProps("Stack","Button"),{Stack:z,TableRowGroup:H,TableSwitchRow:R}=Y;function q(){return A.useProxy(r),React.createElement(z,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24},React.createElement(H,{title:"Settings"},React.createElement(R,{label:"Add button to chats.",subLabel:"Add the JumpToTop button above the Jump to Present button in chats.",value:r.jumpToPresent,onValueChange:function(e){return r.jumpToPresent=e}}),React.createElement(R,{label:"Add button to action sheets.",subLabel:"Add the JumpToTop button to channel and forum action sheets.",value:r.actionSheets,onValueChange:function(e){return r.actionSheets=e}})))}const f=[];var K={onLoad(){j(),f.push(F()),f.push(k())},onUnload(){for(const e of f)e()},settings:q};return s.default=K,Object.defineProperty(s,"__esModule",{value:!0}),s})({},vendetta.metro,vendetta.metro.common,vendetta,vendetta.patcher,vendetta.ui.assets,vendetta.utils,vendetta.plugin,vendetta.storage);
