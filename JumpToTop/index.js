(function(s,n,r,u,d,P,R,B){"use strict";const b=n.findByStoreName("SelectedChannelStore"),A=n.findByStoreName("ChannelStore"),C=n.findByProps("jumpToMessage"),{openUrl:f}=n.findByProps("openUrl");function I(){const t=b.getChannelId(),e=A.getChannel(t);C.jumpToMessage({channelId:e.id,messageId:e.id,flash:!0,jumpType:"ANIMATED"})}function p(t,e){f(`https://discord.com/channels/${t}/${e}/${e}`)}function v(t,e){f(`https://discord.com/channels/${t}/${e}/${e}`)}const o=R.storage;function $(){o.jumpToPresent??=!0,o.actionSheets??=!0}const{ActionSheetRow:i}=n.findByProps("ActionSheetRow"),w=n.findByName("ForumPostLongPressActionSheet",!1),E=n.findByName("ChannelLongPressActionSheet",!1);function h(t){return P.findInReactTree(t,function(e){return e?.[0]?.type?.name==="ActionSheetRowGroup"})}function m(t){return React.createElement(i.Group,null,React.createElement(i,{label:"Jump To Top",icon:React.createElement(r.ReactNative.View,{style:{transform:[{scaleY:-1}]}},React.createElement(i.Icon,{source:d.getAssetIDByName("ArrowLargeDownIcon")})),onPress:t}))}const N=[0,1,2,3,5,6,10,11,12];function j(){const t=[];return t.push(u.after("default",w,function([{thread:e}],c){if(!o.actionSheets)return;const a=h(c);a&&a.unshift(m(function(){return v(e.guild_id,e.id)}))})),t.push(u.after("default",E,function(e,c){if(!o.actionSheets)return;const a=c?.props?.channel;a&&a.type in N&&u.after("type",c,function(S,z){const y=h(z);y&&y.unshift(m(function(){return p(a.guild_id??"@me",a.id)}))})})),function(){for(const e of t)e()}}const J=n.findByProps("Stack","Button","Text"),{IconButton:L}=J;function D({isNotCurrentChannel:t=!1,details:e={}}){return React.createElement(r.ReactNative.View,{style:{transform:[{scaleY:-1}]}},React.createElement(L,{onPress:t?function(){return p(e.guildId,e.channelId)}:I,variant:"secondary",icon:d.getAssetIDByName("ArrowLargeDownIcon")}))}const k=n.findByName("JumpToPresentButton",!1),V=n.findByProps("Stack","Button","Text"),{Stack:_}=V,M=n.findByStoreName("ChannelStore"),T=Symbol("Patched by JumpToTop");function O(){return u.after("default",k,function([{channelId:t}],e){if(!o.jumpToPresent||e==null||e[T])return;const c=e.props?.children;e[T]=!0;const{type:a,guild_id:S}=M.getChannel(t);e.props.children=r.React.createElement(_,null,r.React.createElement(D,{isNotCurrentChannel:a===2,details:{channelId:t,guildId:S}}),c)})}const G=n.findByProps("Stack","Button"),{Stack:U,TableRowGroup:x,TableSwitchRow:g}=G;function F(){return B.useProxy(o),React.createElement(U,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24},React.createElement(x,{title:"Settings"},React.createElement(g,{label:"Add button to chats.",subLabel:"Add the JumpToTop button above the Jump to Present button in chats.",value:o.jumpToPresent,onValueChange:function(t){return o.jumpToPresent=t}}),React.createElement(g,{label:"Add button to action sheets.",subLabel:"Add the JumpToTop button to channel and forum action sheets.",value:o.actionSheets,onValueChange:function(t){return o.actionSheets=t}})))}const l=[];var Y={onLoad(){$(),l.push(O()),l.push(j())},onUnload(){for(const t of l)t()},settings:F};return s.default=Y,Object.defineProperty(s,"__esModule",{value:!0}),s})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui.assets,vendetta.utils,vendetta.plugin,vendetta.storage);
